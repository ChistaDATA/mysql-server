# MySQL Rest Service schema created.
# MySQL Rest Service, server accounts configured.
/export/mysql/src/mysql-trunk/buildConfig/build/mysql-test/var/tmp/router.1/data/
# mysqlrouter_keyring
#  * "set" root password ""
# mysqlrouter_keyring
#  * set rest-user jwt_secret "secret12345"
# Generating config into generated_router_1.cnf
#  * https
#  * MySQL Rest Service
# Connection "router.1" active
# restart:generated_router_1.cnf
# DB `proc_schema` - created


## I. Verify handling of singals generated inside SP
#
# 1. Signals with proper sql-state, still outside the range
# 2. Signals with proper sql-state, still unsupported HTTP Status
# 3. Singal inside the range, return JSON object with message
#    and http-status coverted from mysql-error
#
#
# Registred SERVICE at path: /svc
# Registred DB_SCHEMA at path: /svc/proc
# Registred DB_OBJECT at path: /svc/proc/report_back1
# Registred DB_OBJECT at path: /svc/proc/report_back2
# Registred DB_OBJECT at path: /svc/proc/nothing
GET /svc/proc/nothing
{
    "items": []
}
OK

#
# I.1
GET /svc/proc/report_back1?mysql_error=5099
{
    "message": "Internal Error",
    "status": 500
}
OK
GET /svc/proc/report_back1?mysql_error=5600
{
    "message": "Internal Error",
    "status": 500
}
OK

#
# I.2
GET /svc/proc/report_back1?mysql_error=5599
{
    "message": "Internal Error",
    "status": 500
}
OK

#
# I.3
GET /svc/proc/report_back1?mysql_error=5201
{
    "message": "This stored procedure signaled an error."
}
OK
GET /svc/proc/report_back1?mysql_error=5511
{
    "message": "This stored procedure signaled an error."
}
OK
DROP SCHEMA proc_schema;
DROP SCHEMA mysql_rest_service_metadata;
DROP ROLE mysql_rest_service_admin;
DROP ROLE mysql_rest_service_schema_admin;
DROP ROLE mysql_rest_service_meta_provider;
DROP ROLE mysql_rest_service_data_provider;
