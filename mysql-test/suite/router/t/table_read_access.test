--source include/have_router.inc

--source ../include/predefined_setup/configure_router_mrs_root.inc
--source ../include/schema/basic_schema.sql


# The test uses HOST to have only paths in HREF fields.
--let $mrs_add_service_path="/svc"
--let $mrs_add_host_name=""
--source ../include/mrs_add_service.inc

--let $mrs_add_schema=basic_schema
--let $mrs_add_schema_path=/basic
--source ../include/mrs_add_schema.inc

--let $mrs_add_db_object=table1
--let $mrs_add_db_object_path=/t1
--let $mrs_add_db_object_auto_register_columns=1
--let $mrs_add_db_object_options='{"logging":{"exceptions":true, "request":{"headers":true, "body":true}, "response":{"headers":true, "body":true}}}'
--source ../include/mrs_add_db_object.inc

--let $mrs_add_db_object=table2
--let $mrs_add_db_object_path=/t2
--let $mrs_add_db_object_auto_register_columns=1
--source ../include/mrs_add_db_object.inc

--let $mrs_host_and_port=127.0.0.1:$extra_http_port
--let MRS_CLIENT_ARGS=$MRS_CLIENT --url https://$mrs_host_and_port

--exec $MRS_CLIENT_ARGS --path /svc/basic/t1 --wait-until-found=60  --request-type post --payload '{"id":1010}'
--exec $MRS_CLIENT_ARGS --path /svc/basic/t1
--exec $MRS_CLIENT_ARGS --path /svc/basic/t1/1 --display all
--exec $MRS_CLIENT_ARGS --path /svc/basic/t1/20
--exec $MRS_CLIENT_ARGS --path /svc/basic/t1/2 --expected-status 404

--exec $MRS_CLIENT_ARGS --path /svc/basic/t2
--exec $MRS_CLIENT_ARGS --path /svc/basic/t2/1
--exec $MRS_CLIENT_ARGS --path /svc/basic/t2/2
--exec $MRS_CLIENT_ARGS --path /svc/basic/t2/200 --expected-status 404
